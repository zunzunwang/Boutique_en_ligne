<!DOCTYPE html>
<html lang="en" ng-app="Boutique">
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Boutique en Ligne</title>
    <script src="../js/angular.js"></script>
    <script src="../js/angular-ui-bootstrap.js"></script>
    <script src="../js/angular-ui-route.js"></script>
    <script src="../js/app.js"></script>
    <script type="../js/animation.js"></script>
	  <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../css/articleTSE.css">
	</head>

	<body ng-controller="content">
    <header>
      <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <p id="label_username" class="navbar-brand"></p>                
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li>
                  <a href="../php/tse.php">Online Store of TSE</a>
                </li>
                <li>
                  <a href="../php/bde.php">Online Store of BDE</a>
                </li>
              </ul>
              <ul class="nav navbar-nav navbar-right">
                <li id="gestion_admin">
         
                </li>
                <li>
                  <a href="../php/myAccount.php">MY_ACCOUNT</a>    
                </li>
                <li>
                  <a href="../php/index.php#contact">CONTACT_US</a>    
                </li>
                <li>
                  <a href="?out=out">LOGOUT</a>    
                </li>
              </ul>
            </div>
        </div>
      </nav>
      
    </header>

    <div class="contentBody">
      <div class="row">
        <div class="col-md-6">
          <a href="../php/index.php"><img id="marque" src="../img/marque.png"></a>
        </div>
        <div class="col-md-6">
        </div>
      </div>

      <div class="article">
      	<form class="form_article_tse">
          <div class="row">
            <div class="col-md-5 col-md-offset-1">
              <img id="produit_image">
            </div>
            <div class="col-md-6">
              <h2><br /></h4>
              <h2 id="produit_name"></h2>
              <h3 id="produit_id"></h3>
              <h4 id="produit_price"></h4>
              <h6><br /></h6>
              <h4 id="produit_type"></h4>
  					  <h6><br /></h6>
              <h4 id="upload_username"></h4>
  					  <h6><br /></h6>
              <h4 id="upload_date"></h4>
              <h6><br /></h6>
            </div>
          </div>
          <br />
          <div class="row">
            <div id="style_description" class="col-md-10 col-md-offset-1">
            <p id="produit_description"></p>
            </div>
          </div>
<!--            <div class="row">
            <div class="col-md-10  col-md-offset-1">
              <div id="buy" class="btn-toolbar pull-right" role="toolbar">
                <div class="btn-group" role="group"><button type="button" class="btn btn-primary">Buy</button></div>          
              </div>
            </div>
          </div> -->
        </form>
      </div>

  	
    	<div class="message">
        <div class="form-group">
          <div class="row">
            <div class="col-md-10 col-md-offset-1">
            <label for="comment">Comment:</label>
            <form id="commentform" name="commentform">
            <textarea name="comment" class="form-control" rows="9" id="comment" placeholder="Leave a message for him..."></textarea>
            <br />
            <div id="comment_button" class="btn-toolbar pull-right" role="toolbar">
            <div class="btn-group" role="group"><button type="button" class="btn btn-danger" id="clear" onclick="ClearTextArea()">Clear</button></div>	
            <div class="btn-group" role="group"><button type="button" class="btn btn-primary" onclick="sentcomment()"id="Send">Send</button></div>					
            </div>
            </form>
            <br /><hr>
            <h4>All comments about this produit:</h4>	
            
            <div id="comment1">
            <h4 id="comment1_name" ></h4>
            <p id="comment1_description"></p>
            <p id="comment1_date"  class="pull-right"></p>
            </div>
            
            <div id="comment2">
            <h4 id="comment2_name" ></h4>
            <p id="comment2_description"></p>
            <p id="comment2_date"  class="pull-right"></p>
            </div>
            
            <div id="comment3">
            <h4 id="comment3_name" ></h4>
            <p id="comment3_description"></p>
            <p id="comment3_date"  class="pull-right"></p>
            </div>
            
            <div id="comment4">
            <h4 id="comment4_name" ></h4>
            <p id="comment4_description"></p>
            <p id="comment4_date"  class="pull-right"></p>
            </div>
            
            <div id="comment5">
            <h4 id="comment5_name" ></h4>
            <p id="comment5_description"></p>
            <p id="comment5_date"  class="pull-right"></p>
            </div>
            
            <div id="comment6">
            <h4 id="comment6_name" ></h4>
            <p id="comment6_description"></p>
            <p id="comment6_date"  class="pull-right"></p>
            </div>
            
            <div id="comment7">
            <h4 id="comment7_name" ></h4>
            <p id="comment7_description"></p>
            <p id="comment7_date"  class="pull-right"></p>
            </div>
            
            <div id="comment8">
            <h4 id="comment8_name" ></h4>
            <p id="comment8_description"></p>
            <p id="comment8_date"  class="pull-right"></p>
            </div>
            
            <div id="comment9">
            <h4 id="comment9_name" ></h4>
            <p id="comment9_description"></p>
            <p id="comment9_date"  class="pull-right"></p>
            </div>
            
            <div id="comment10">
            <h4 id="comment10_name" ></h4>
            <p id="comment10_description"></p>
            <p id="comment10_date"  class="pull-right"></p>
            </div>
            <nav>
            <div id = "pager_records"></div>
            <div id = "pager_select"></div>
            </nav>
            </div>
            </div>			
    	</div>
      </div>
    </div>







    <hr style="border:1px solid black;" />
    
    <footer>
      <div>      
        <span>copyright &copy;2016 <b><a href="http://www.telecom-st-etienne.fr/">TELECOM SAINT-ETIENNE</a></b>.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All rights reserved.</span>
      </div>
    </footer>

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.js"></script>

    <script>    	
    	function ClearTextArea()
    	  {
    		document.getElementById("comment").value="";
    	  } 
    </script>
       
    <script>
     
	function sentcomment(){
		var $_GET = (function(){
		    var url = window.document.location.href.toString();
		    var u = url.split("?");
		    if(typeof(u[1]) == "string"){
		        u = u[1].split("&");
		        var get = {};
		        for(var i in u){
		            var j = u[i].split("=");
		            get[j[0]] = j[1];
		        }
		        return get;
		    } else {
		        return {};
		    }
		})();
		
  		if(document.getElementById("comment").value){
   			var produit_id=$_GET['articleId'];
			var produit_comment=document.getElementById("comment").value;			
			//初始化post方法：
			var postStr   = "comment="+ produit_comment +"&produit_id="+ produit_id;
			//实例化Ajax
			//var ajax = InitAjax();
			var ajax = false;
			//开始初始化XMLHttpRequest对象
			if(window.XMLHttpRequest) { //Mozilla 浏览器
				ajax = new XMLHttpRequest();
			if (ajax.overrideMimeType) {//设置MiME类别
				ajax.overrideMimeType("text/xml");
			}
			}
			else if (window.ActiveXObject) { // IE浏览器
				try {
					ajax = new ActiveXObject("Msxml2.XMLHTTP");
					} catch (e) {
						try {
							ajax = new ActiveXObject("Microsoft.XMLHTTP");
							} catch (e) {}
							}
					}
			         if (!ajax) { // 异常，创建对象实例失败
			                 window.alert("不能创建XMLHttpRequest对象实例.");
			                 return false;
			         }
			//通过Post方式打开连接
			ajax.open("POST","../php/addcomment.php", true);

			//定义传输的文件HTTP头信息
			ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

			//发送POST数据
			ajax.send(postStr);

			//获取执行状态
			ajax.onreadystatechange = function() { 
			   //如果执行状态成功，那么就把返回信息写到指定的层里
			   if (ajax.readyState == 4 && ajax.status == 200) {
				   alert("you have added a new comment!");
				   location.reload();
				   } 
			}  
			}else{
			alert("comment can't be empty!")			
		}
		}
	
    </script>
    <script>
		function reply(comment_name,comment_date,comment){
			comment=comment.replace(/<br>/g,"\n");
			comment=comment.replace(/&nbsp;/g," ");
			document.getElementById("comment").value="";
			//document.getElementById("comment").innerText="";
			var reference_title="reply to "+comment_name+" for comment at "+comment_date+":\n";
			var reference_content=comment+"\n";
			var line="================\n";
			var insertText=reference_title+reference_content+line;
			//document.getElementById("comment").innerText=insertText;
			document.getElementById("comment").value=insertText;
			}
   </script>


	</body>
</html>